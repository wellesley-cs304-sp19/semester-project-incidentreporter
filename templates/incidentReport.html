<!--author: Karina Lin, Julia Klugherz, Katherine Gao-->

<!DOCTYPE html>

{% extends "base.html" %}

{% block content %}
<h6 id="message">not yet saved</h6>

<h2 id="form-title">Report an Incident</h2>
<div class="row justify-content-center">
<form action="{{url_for('incidentReport')}}" method="post" enctype="multipart/form-data">
    
    <h4 class="form-headings">Reporter Information</h4>
    <div class="form-group">

    
<p id="anon1"> Do you want to remain anonymous to the person you are reporting?</p>
<div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="anon-r" id="inlineRadio1" value="1">
    <label class="form-check-label" for="anon-r">Yes</label>
</div>
<div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="anon-r" id="inlineRadio2" value="0">
    <label class="form-check-label" for="anon-r">No</label>
</div>

<p id="anon2"> Do you want to remain anonymous to everyone?</p>
<div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="anon-all" id="inlineRadio1" value="1">
    <label class="form-check-label" for="anon-r">Yes</label>
</div>
<div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="anon-all" id="inlineRadio2" value="0">
    <label class="form-check-label" for="anon-r">No</label>
</div> <br>

    <label for="advocate"> Advocate Name:
    <select name="advocate" id="advocate">
            <option value="">
    {% for fac in facStaff %}
            <option value="{{fac.BNUM}}" {% if incidentInfo.advocateID == fac.BNUM %} selected="selected"{% endif %}>{{fac.name}}</option>"
    {% endfor %}
            </select>
    </label> <br>
    
    <h4 class="form-headings"> Incident Information </h4>
    
    <label for="faculty"> Who are you reporting?
    <select name="faculty" id="faculty">
            <option value="">
    {% for fac in facStaff %}
            <option value= "{{fac.BNUM}}">{{fac.name}}</option>"
    {% endfor %}
            </select>
    </label> <br>
    
    <label for="location"> Location of Incident:
        <input id="location" type="text" name="location" size="30" value = "{{incidentInfo.location}}" autofocus>
    </label> <br>
    
    <label for="date"> Date of Incident: 
        <input type="date" id="date" value = "{{incidentInfo.dateOfIncident}}" name="date">
    </label> <br>
    
    <label for="category"> Type of Incident: 
    <select name="category">
            <option value="">
            <option>Racism
            <option>Ableism
            <option>Sexism
            <option>Sexual Harassment
            <option>Other
        </select>
    </label> <br>
    
    <label  for="description"> Description of the incident:
        <textarea name="description" id="description" rows="10" cols="30" > {{incidentInfo.description}}</textarea>
    </label>
    
    {% if incidentInfo.submit == True %}
        <p><label for="file">Upload a file: <input type="file" name="file" ></label></p>
    
        <p id="enter"> <input class="btn btn-outline-success" type='submit' value='Submit'> </p>
    {% endif %}
    
</form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        /* global $ */
        console.log("test");
        
        $("#description").change(function(){
            console.log("changed");
            $("#message").html("hello");
            
        });
        console.log("hello2");
        console.log($(this).closest("#description").val());
        // console.log($(this).val());
            
        // const tt = $(this).closest(".rating_form").find("[name=tt]").val();
        // const rating = $(this).val();
            
        // $.post("url_for(updateIncident)",{"tt": tt, "rating": rating}, updateAvgRating);
          
        
        function showSuccessMessage(obj) {
            if(obj.error) {
                $("#errors").empty().html('Error: '+obj.err);
            } else {
                $("#"+obj.tt)
                    .html(obj.average);
            }
        
            
    }
    

    </script>
    

{% endblock %}
